# Проект СИСТЕМА ОПРОСОВ

Приложение реализовано с использованием фреймворков Django и DjangoRestFramework



## Суть проекта
Спроектировать и разработать API для системы опросов пользователей.

Функционал для администратора системы:
- авторизация в системе
- добавление/изменение/удаление опросов. Атрибуды опроса: название, дата старта, дата окончания, описание.
После создания поле "дата старта" у опроса менять нельзя.
- добавление/изменение/удаление вопросов в опросе. Атрибуты вопросов: текст вопроса, тип вопроса (ответ текстом,
ответ с выбором одного варианта, ответ с выбором нескольких вариантов)

Функционал для пользователей системы:
- получение списка активных опросов
- прохождение опроса: опросы можно проходить анонимно, в качестве идентификатора пользователя в API передается
числовой ID, по которому сохраняются ответы пользователя на вопросы: один пользователь может участвовать в любом
количестве опросов
- получение пройденных пользователем опросов с детализацией по ответам (что выбрано) по ID уникальному пользователя



## Разворачивание проекта
1. Создать директорию, в которую будет помещен каталог с проектом
2. Выполнить команду `git clone https://github.com/stanislav-akolzin/fabrique_solutions_task.git`
3. Зайти в созданныый каталог и выполнить команду `python<veresion> -m venv env` для создания виртуального окружения под именем 'env'
4. Выполнить команду `. env/bin/activate` для активации виртуального окружения
5. Выполнить команду `pip install -r requirements.txt` для установки всех зависимостей для проекта из файла requirements.txt
6. Выполнить команду `python manage.py migrate`, для того чтобы данные проекта создали необходимые таблицы в базе данных 
*Проект реализован на встроенной БД Django*
7. Создать суперпользователя БД командой `python manage.py createsuperuser`
8. Теперь можно зайти в админку и создать необходимые опросы и вопросы к опросам



## Тестирование и использование проекта
Предполагается, что опросы и вопросы создаются администратором в админке приложения.

### Функционал для пользователей системы
Демонстрация будет осуществлена с использованием утилиты Postman.
Взаимодействие пользователей с приложением реализовано через REST-api

1. Пользователь получает список актуальных опросов GET-запросом по адресу `<host>/api/polls`
![image](https://user-images.githubusercontent.com/78170834/144282938-344968eb-bdeb-461c-a5a4-52e613ed49e6.png)

2. Пользователь может просмотреть детальную информацию по интересующему опросу. Необходимо запомнить id из предыдущего запроса и отправить GET-запрос на адрес `<host>/api/get_question/<poll_id>`
![image](https://user-images.githubusercontent.com/78170834/144283173-dd6e7eda-47cf-4c6e-b729-9a7b997a37e6.png)
В ответ приходит подробная информация по опросу с id каждого вопроса и текстом. Эти id пригодятся при прохождении опроса

3. Для прохождения опроса пользователь должен отправить POST-запрос на адрес `<host>/api/take_poll/`
В теле запроса необходимо прислать данные следующей структуры:
{"custom_poll":
  {"user_id": <user id>,
   "poll": <poll id>,
   "answers": {
     <question_id #1>: <answer>
     ...
     <question_id #n>: <answer>
   }
  }
 }
 user id - id пользователя, по которому ведется учет его опросов в системе, в т.ч. получение данных по его опросам
 poll id - id опроса
 question_id - id вопроса
       
При корректной отправке данных в теле ответа придет уведомление об успешном прохождении опроса
![image](https://user-images.githubusercontent.com/78170834/144284480-8683964f-481c-4e2f-9234-7c0c7356dc16.png)

4. Для получения всех данных по опросам каждого пользователя, необходимо отправить GET-запрос на адрес `<host>/api/get_polls/<user_id>`, где 'user_id' это id пользователя
В случае наличия пройденных опросов в теле ответа будет подробная информация по вопросам и ответам с разбивкой по опросам:
![image](https://user-images.githubusercontent.com/78170834/144284988-d0918dd6-2e8a-4b4c-8790-58765a7fdd60.png)
